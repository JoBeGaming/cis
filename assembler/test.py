import main

import unittest as test
from pathlib import Path

#class FunctionTests(test.TestCase):
#    pass

class CompileTests(test.TestCase):
    def test_compile_instructions(self):
        asm = main.AsmApi()
        fpath = Path(__file__).parent / "test/instructions.txt"
        expected = {'b00000000': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0], 'b00000001': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1], 'b00000010': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1], 'b00000011': [0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1], 'b00000100': [0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0], 'b00000101': [0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 1], 'b00000110': [0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0], 'b00000111': [0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1], 'b00001000': [0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 0], 'b00001001': [0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1], 'b00001010': [0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0], 'b00001011': [0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1], 'b00001100': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0], 'b00001101': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0], 'b00001110': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0]}

        output = asm.asm_file(fpath)
        self.assertEqual(output, expected)
    
    def test_compile_sort(self):
        asm = main.AsmApi()
        fpath = Path(__file__).parent / "test/sort.txt"
        expected = {'b00000000': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1], 'b00000001': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1], 'b00000010': [0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 1, 1], 'b00000011': [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0], 'b00000100': [0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0], 'b00000101': [0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 1, 1, 0, 0], 'b00000110': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0], 'b00000111': [0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1], 'b00001000': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1], 'b00001001': [0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0], 'b00001010': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1], 'b00001011': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0], 'b00001100': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1], 'b00001101': [0, 0, 0, 1, 1, 0, 1, 0, 1, 1, 0, 0, 0, 1, 1], 'b00001110': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0], 'b00001111': [0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0], 'b00010000': [0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0], 'b00010001': [0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0], 'b00010010': [0, 0, 1, 0, 1, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1], 'b00010011': [0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0], 'b00010100': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1]}

        output = asm.asm_file(fpath)
        self.assertEqual(output, expected)

test.main()